<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Welcome to Synergist.Cloud | Region: eu-west-1</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="author" content="Balinder Walia - Synergist.cloud">
<meta name="generator" content="vi">
<meta name="keywords" content="Synergist cloud, cloud job bagging system, job costing system, Synergist, Balinder, Walia">
<meta name="description" content="nginx test page">
 <!-- Tell the browser to be responsive to screen width -->
 <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
 <!-- Bootstrap 3.3.6 -->
 <link rel="stylesheet" href="css/bootstrap.min.css">
 <!-- Font Awesome -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
 <!-- Ionicons -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
 <!-- Theme style -->
 <link rel="stylesheet" href="css/Admin.min.css">
 <link rel="stylesheet" href="css/skins/_all-skins.min.css">
 <style>
.uldragdrop{
padding:0px;
margin:0px;
}
		
.uldragdrop li{
list-style: none;
background: #fff;
border: 1px solid #ddd;
border-radius: 4px;
cursor: pointer;
padding: 7px 12px;
margin-bottom: 6px;
text-align: left;
}
		
.uldragdrop li:hover{
color:#fff;		
background: #b90140;
border:1px solid #8a0024;
}
#select_systems_chosen{
width : 100%!important;
}
</style>	
 </head>
 <body class="hold-transition skin-blue sidebar-mini">	
 <div class="wrapper">
 

  <header class="main-header">
    <!-- Logo -->
    <a href="index.html" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini"> <i class="fa fa-dot-circle-o"></i> </span>
      <!-- logo for regular state and mobile devices -->
     <span class="logo-lg"><i class="fa fa-dot-circle-o"></i> WebRouter</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>

      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- Messages: style can be found in dropdown.less-->
          <li class="dropdown messages-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-envelope-o"></i>
              <span class="label label-success">4</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have 4 messages</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li><!-- start message -->
                    <a href="#">
                      <div class="pull-left">
                        <img src="img/user2-160x160.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Support Team
                        <small><i class="fa fa-clock-o"></i> 5 mins</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <!-- end message -->
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="img/user3-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Design Team
                        <small><i class="fa fa-clock-o"></i> 2 hours</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="img/user4-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Developers
                        <small><i class="fa fa-clock-o"></i> Today</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="img/user3-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Sales Department
                        <small><i class="fa fa-clock-o"></i> Yesterday</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="img/user4-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Reviewers
                        <small><i class="fa fa-clock-o"></i> 2 days</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                </ul>
              </li>
              <li class="footer"><a href="#">See All Messages</a></li>
            </ul>
          </li>
          <!-- Notifications: style can be found in dropdown.less -->
          <li class="dropdown notifications-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-bell-o"></i>
              <span class="label label-warning">10</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have 10 notifications</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-aqua"></i> 5 new members joined today
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-warning text-yellow"></i> Very long description here that may not fit into the
                      page and may cause design problems
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-red"></i> 5 new members joined
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-shopping-cart text-green"></i> 25 sales made
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-user text-red"></i> You changed your username
                    </a>
                  </li>
                </ul>
              </li>
              <li class="footer"><a href="#">View all</a></li>
            </ul>
          </li>
          <!-- Tasks: style can be found in dropdown.less -->
          <li class="dropdown tasks-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-file-o"></i>
              <span class="label label-danger">5</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">Switch Site to</li>
			  
			   <li STYLE="padding:15px;" >
                  
                      <input TYPE="text" CLASS="form-control"  STYLE="height:34px; border-radius:4px; border: 1px solid #ddd;">
                    
                   
                  </li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                 
                  
                  <li>
                    <a href="#">
                      
                      Demo website
                    </a>
                  </li>
				  
				  
				  <li>
                    <a href="#">
                      
                      Demo website
                    </a>
                  </li>
				  
				  
				  
				  <li>
                    <a href="#">
                      
                      Demo website
                    </a>
                  </li>
				  
				  
				  
				  <li>
                    <a href="#">
                      
                      Demo website
                    </a>
                  </li>
				  
				  
				  
				  <li>
                    <a href="#">
                      
                      Demo website
                    </a>
                  </li>
				  
				  
				  
				  
				  <li>
                    <a href="#">
                      
                      Demo website
                    </a>
                  </li>
				  <li>
                    <a href="#">
                      
                     Testing website
                    </a>
                  </li>
				  
				  <li>
                    <a href="#">
                      
                     Live website
                    </a>
                  </li>
                 
               
                </ul>
              </li>
              
            </ul>
          </li>
          <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <img src="img/user2-160x160.jpg" class="user-image" alt="User Image">
              <span class="hidden-xs">Alexander Pierce</span>
            </a>
            <ul class="dropdown-menu">
              <!-- User image -->
              <li class="user-header">
                <img src="img/user2-160x160.jpg" class="img-circle" alt="User Image">

                <p>
                  Alexander Pierce - Web Developer
                  <small>Member since Nov. 2012</small>
                </p>
              </li>
              <!-- Menu Body -->
              <li class="user-body">
                <div class="row">
                  <div class="col-xs-4 text-center">
                    <a href="#">Followers</a>
                  </div>
                  <div class="col-xs-4 text-center">
                    <a href="#">Sales</a>
                  </div>
                  <div class="col-xs-4 text-center">
                    <a href="#">Friends</a>
                  </div>
                </div>
                <!-- /.row -->
              </li>
              <!-- Menu Footer-->
              <li class="user-footer">
                <div class="pull-left">
                  <a href="#" class="btn btn-default btn-flat">Profile</a>
                </div>
                <div class="pull-right">
                  <a href="#" class="btn btn-default btn-flat">Sign out</a>
                </div>
              </li>
            </ul>
          </li>
          <!-- Control Sidebar Toggle Button -->
                </ul>
      </div>
    </nav>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- Sidebar user panel -->
      <div class="user-panel">
        <div class="pull-left image">
          <img src="img/user2-160x160.jpg" class="img-circle" alt="User Image">
        </div>
        <div class="pull-left info">
          <p>Alexander Pierce</p>
          <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
        </div>
      </div>
      <!-- search form -->
      <form action="#" method="get" class="sidebar-form">
        <div class="input-group">
          <input type="text" name="q" class="form-control" placeholder="Search...">
              <span class="input-group-btn">
                <button type="submit" name="search" id="search-btn" class="btn btn-flat" STYLE="border-left:none;     line-height: 12px;"><i class="fa fa-search"></i>
                </button>
              </span>
        </div>
      </form>
      <!-- /.search form -->
      <!-- sidebar menu: : style can be found in sidebar.less -->
     <ul class="sidebar-menu" id="main_menu_ui"">
      
        <li class="active treeview">
          <a href="index.html">
            <i class="fa fa-dashboard"></i> <span>Dashboard</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
		  </li>
		  <li class=" treeview">
          <a href="#">
            <i class=" fa fa-list"></i> <span>Lists</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="lists.html"><i class="fa fa-circle-o"></i> Lists</a></li>
           	<li class="active"><a href="list.html"><i class="fa fa-circle-o"></i> Add New List</a></li>
          </ul>
        </li>
         <li class=" treeview">
          <a href="#">
            <i class=" fa fa-server"></i> <span>Hosts</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="hosts.html"><i class="fa fa-circle-o"></i> List Hosts</a></li>
           	<li class="active"><a href="host.html"><i class="fa fa-circle-o"></i> Add New Host</a></li>
          </ul>
        </li>
        <li class=" treeview">
          <a href="#">
            <i class="fa fa-life-ring"></i> <span>Rules</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="rules.html"><i class="fa fa-circle-o"></i> List Rules</a></li>
           	<li class="active"><a href="rule.html"><i class="fa fa-circle-o"></i> Add New Rule</a></li>
          </ul>
        </li>
        <li class=" treeview">
          <a href="#">
            <i class="fa fa-globe"></i> <span>Sites</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="sites.html"><i class="fa fa-circle-o"></i> List Sites</a></li>
           	<li class="active"><a href="site.html"><i class="fa fa-circle-o"></i> Add New Site</a></li>
          </ul>
        </li>
        <li class=" treeview">
          <a href="#">
            <i class=" fa fa-arrow-circle-o-up"></i> <span>Upstreams</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="upstreams.html"><i class="fa fa-circle-o"></i> List Upstreams </a></li>
           	<li class="active"><a href="upstream.html"><i class="fa fa-circle-o"></i> Add New Upstream</a></li>
          </ul>
        </li>
        <li class=" treeview">
          <a href="#">
            <i class="fa fa-globe"></i> <span>Urls</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            <li class="active"><a href="urls.html"><i class="fa fa-circle-o"></i> List Urls </a></li>
           	<li class="active"><a href="url_form.html"><i class="fa fa-circle-o"></i> Add New Url</a></li>
          </ul>
        </li>
		</ul>
    </section>
    <!-- /.sidebar -->
  </aside>


  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Token
        <small><span id="pageHeadingID">Add</span></small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="index.html"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Token</li>
      </ol>
    </section>

    <!-- Main content -->
	<section class="content">
		<div class="row">
      						<div class="panel-body no-padding-top bg-white"> 
            					
            					<div class="col-md-8 col-sm-12">
            					<form class="form-horizontal" action="" method="POST" id="EntryForm" novalidate="novalidate">
            						<input class="form-control" id="uuid" name="uuid" value="" type="hidden">
     								<div class="form-group">
                  						<label class="control-label col-md-2" for="first-name">Name<span class="required">*</span></label>
                  						<div class="col-md-6 col-lg-4">
                    						<input required="required" id="name" name="name" class="form-control col-md-5 col-xs-12" onblur="generate_manual_code('name','code')" onkeyup="generate_manual_code('name','code')" value="" type="text">
                  						</div>
                					</div>
              						<div class="form-group">
                  						<label class="control-label col-md-2" for="">Code<span class="required">*</span></label>
                  						<div class="col-md-6 col-lg-4">
                   							<input required="required" class="form-control col-md-5 col-xs-12" id="code" name="code" readonly="" value="" type="text">
                  						</div>
                					</div>
                					<div class="form-group">
                  						<label class="control-label col-md-2" for="">Content<span class="required">*</span></label>
                  						<div class="col-md-6 col-lg-9">
                   							<textarea required="required" class="form-control col-md-5 col-xs-12 ui-droppable" rows="15" id="content" name="content"></textarea>
                  						</div>
                					</div>
                					<div class="form-group">
                  						<label class="control-label col-md-2" for="">Description </label>
                  						<div class="col-md-6 col-lg-9">
                   							<textarea class="form-control col-md-5 col-xs-12" id="description" name="description"></textarea>
                  						</div>
                					</div>
                					
                					<div class="form-group">
    									<label for="" class="col-sm-2 control-label"></label>
    									<div class="col-sm-9">
    										<label> <input id="status" name="status" value="1" type="checkbox"> <strong style="font-weight:600">Active</strong></label>
    			  						</div>
									</div>
                					<div class="form-group">
                   						<div class="col-md-9 col-lg-6" align="center">
               								<div class="submit-btn-setting"> <button type="submit" class="btn btn-primary btn-color margin-right-5 btn-sm">Submit</button>
               								
               									<a href="/tokens.html" class="btn btn-danger btn-sm">Cancel</a>
               								
               								</div>
               							</div>
                					</div>
              					</form>
              					</div>
              					<div class="col-md-4 col-sm-12 pull-right">
              						<div class="well" style="overflow:hidden;"><div class="form-horizontal ">
              							<h4 style="margin-top:0px;">Drag and drop tokens in "Content"</h4>
              							<!--<div class="form-group" style="">
                  					<div class="col-md-12 col-lg-12" style="padding: 0px 15px;">
                  						<div class="btn-inline display-inline-block" style="width: 100%;">
											<input class="form-control" style="height:36px;" required="" id="search_here" placeholder="Search existing tokens here..." value="">
											<button class="btn btn-left-align btn-link no-shadow bg-transparent no-padding-top padding-right-10 right-auto left" type="button" id="searchBtn" title="Search"><i class="glyphicon glyphicon-search"></i></button>
										</div>
                  					</div>
                				</div>-->
              							<ul id="DragWordList" class="uldragdrop" runat="server">
              							
              							</ul>
                  					</div></div>
                  					
              					</div>
              				</div>
            			</div>
	</section>
		
        <!-- right col -->
      </div>
      <!-- /.row (main row) -->

    </section>
<!-- Modal -->
	<footer class="main-footer">
    
    <strong>Copyright &copy; 2016-2017 <a href="http://www.synergist.co.uk" target="_blank">Synergist</a>.</strong> All rights
    reserved.
  </footer>
  
</div>
<script src="js/jquery-2.2.3.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.validate.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script type="text/javascript">
function loadTokens(){
	$.getJSON("/api_fetch_list?search=token",function(result){
		var contentHtml="";
		if(result.aaData.length>0){
			$.each(result.aaData, function(i,row){
				var valueObj = JSON.parse(row.value);
				if(typeof(valueObj)=="string"){
					valueObj = JSON.parse(valueObj);
				}
				if(valueObj.code!=$("#code").val()){
					contentHtml+="<li>"+valueObj.code+"</li>";
				}
			});
     	}
		$("#DragWordList").html(contentHtml);
		$("#DragWordList li").draggable({
			appendTo: "body",
        	helper: "clone",
        	cursor: "select",
        	revert: "invalid"
    	});
	});
}
    $(document).ready(function() {
    	// fetch existing tokens
		loadTokens();
    
		if(getUrlVars() && getUrlVars()["id"]  && getUrlVars()["id"]!="") {
			$.getJSON("/api_get_key?key="+getUrlVars()["id"],function(result){
				if(result.success && result.aaData && result.aaData.length>0){
				$("#pageHeadingID").html("Edit");
				var aaDataStr= result.aaData;
				var aaDataObj = JSON.parse(aaDataStr);
				$.each(aaDataObj, function(key,value){
					$("#"+key).val(value);
					
					if(key=="status"){
						$("#status").prop("checked", true);
					}
				});
			}
			});
		}
			$('#table-breakpoint').basictable({
        		breakpoint: 751
   			});
      $("#EntryForm").validate({
			ignore: "",
			onkeyup: false,
			errorClass: 'error',
			validClass: 'valid',
			errorElement: "em",
			errorPlacement: function(error, element) {
				$(element).closest('div').append(error);
			},
			onfocusout: false,
			invalidHandler: function(form, validator) {
				var errors = validator.numberOfInvalids();
				if (errors) {                    
					validator.errorList[0].element.focus();
				}
			},
			rules: {
				name: { required: true },
				code: { required: true },
				content: { required: true }
			},
			submitHandler: function(form) {
				var tokenStr=$("#uuid").val();
				if(tokenStr=="") {
					var tokenStr=guid();
					$("#uuid").val(tokenStr);
				}
				var entry_form_data_obj = dataAsJson("EntryForm");
				var keyStr= "token:"+$("#code").val();
				$.ajax({
					url: '/api_post_key',
					type: 'POST',
					data: { "key" : keyStr, "value" : JSON.stringify(entry_form_data_obj) },
					contentType: false,
					dataType: 'json',
					success: function(response){
						if(response.success){
							window.location.href = "token.html?id="+keyStr+"&"+Math.random();
						} else if(response.error) {
							$('#EntryForm').before('<div class="alert alert-error alert-dismissable uploadFile"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>'+response.error+'</div>');
						}else {
							$('#EntryForm').before('<div class="alert alert-error alert-dismissable uploadFile"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>Sorry, error while saving details!</div>');
						}
					}
				});
 			}
		});		
	initDroppable($("#content"));
    function initDroppable($elements) {
    	$elements.droppable({
        	hoverClass: "textarea",
            accept: ":not(.ui-sortable-helper)",
            drop: function(event, ui) {
               var $this = $(this);
 
                var tempid = ui.draggable.text();
                var dropText;
            	dropText = "<*--" + tempid + "--*>";
                var droparea = document.getElementById('content');
                var range1 = droparea.selectionStart;
                var range2 = droparea.selectionEnd;
                var val = droparea.value;
                var str1 = val.substring(0, range1);
                var str3 = val.substring(range1, val.length);
                droparea.value = str1 + dropText + str3;
            }
    	});
    }
      
    });
  </script>
<script src="js/basictable.js"></script>
<script src="js/app.min.js"></script>
<script src="js/custom.js"></script>
</body>
</html>